# 🌐 UltraTranslate - マルチAPI対応ブラウザ翻訳拡張機能

<div align="center">

![バージョン](https://img.shields.io/badge/バージョン-1.0.0-blue.svg)
![Chrome](https://img.shields.io/badge/Chrome-拡張機能-green.svg)
![ライセンス](https://img.shields.io/badge/ライセンス-MIT-purple.svg)
![API](https://img.shields.io/badge/API-4+-orange.svg)
![言語](https://img.shields.io/badge/言語-9-red.svg)

**🚀 複数のAPIに対応したリアルタイムウェブページ翻訳のための強力なChrome拡張機能**

### 📚 ドキュメント言語

[**English**](../README.md) | [**中文简体**](README.zh-CN.md) | [**日本語**](README.ja.md) | [**한국어**](README.ko.md) | [**Español**](README.es.md)

</div>

---

### ✨ 機能

<table>
<tr>
<td width="50%">

#### 🎯 コア機能
- 🔄 **マルチAPI対応** - Google、DeepSeek、OpenAI、Baidu
- 📝 **原文保持** - 並列比較表示
- 🎨 **スマート検出** - 高度なテキストフィルタリング
- ⚡ **リアルタイム翻訳** - 進捗インジケーター付き
- 💾 **スマートキャッシュ** - パフォーマンス向上のためのLRUキャッシュ

</td>
<td width="50%">

#### 🎨 ユーザーインターフェース
- 🌙 **ダークテーマ** - OpenAI風デザイン
- 🌍 **9言語対応** - 日本語/英語/中国語/韓国語など
- 🚀 **クイックポップアップ** - 高速アクセス制御
- ⚙️ **設定ページ** - 包括的なオプション

</td>
</tr>
</table>

### 🌟 対応インターフェース言語

<div align="center">

| インターフェース言語 | ネイティブ名 | 国旗 |
|:---:|:---:|:---:|
| 英語 | English | 🇬🇧 |
| 中国語簡体字 | 中文简体 | 🇨🇳 |
| 中国語繁体字 | 中文繁體 | 🇹🇼 |
| 日本語 | 日本語 | 🇯🇵 |
| 韓国語 | 한국어 | 🇰🇷 |
| スペイン語 | Español | 🇪🇸 |
| フランス語 | Français | 🇫🇷 |
| ドイツ語 | Deutsch | 🇩🇪 |
| ロシア語 | Русский | 🇷🇺 |

</div>

### 🚀 高度な機能
- 🤖 **カスタムAIプロンプト** - 翻訳動作をカスタマイズ
- 📦 **バッチ処理** - 複数の翻訳を最適化
- ↔️ **RTL対応** - アラビア語、ヘブライ語、ペルシャ語サポート
- ♿ **アクセシビリティ** - ARIA、キーボードショートカット、スクリーンリーダー
- 🔄 **自動翻訳** - スマート言語検出
- 🚫 **サイト除外** - 翻訳しないサイトを設定

## 📦 インストール

<details>
<summary><b>📥 クイックインストールガイド</b></summary>

```bash
# 1. リポジトリをクローン
git clone https://github.com/yourusername/ultratranslate.git

# 2. Chrome拡張機能ページを開く
chrome://extensions/

# 3. デベロッパーモードを有効化
トグル → オン

# 4. 拡張機能を読み込む
"パッケージ化されていない拡張機能を読み込む"をクリック → フォルダを選択
```

</details>

### 🎯 ステップバイステップインストール

| ステップ | アクション | 説明 |
|:---:|:---|:---|
| 1️⃣ | **ダウンロード** | このリポジトリをクローンまたはダウンロード |
| 2️⃣ | **拡張機能を開く** | `chrome://extensions/` へ移動 |
| 3️⃣ | **デベロッパーモード** | 右上のトグルを有効化 |
| 4️⃣ | **拡張機能を読み込む** | クリックして拡張機能フォルダを選択 |
| 5️⃣ | **成功！** | ツールバーに拡張機能アイコンが表示されます |

## ⚙️ 設定

### 🚀 クイック設定
1. ブラウザツールバーのUltraTranslateアイコンをクリック
2. ドロップダウンから対象言語を選択
3. 両方のテキストを保持する場合は「原文を保持」を切り替え
4. 「ページを翻訳」をクリックして翻訳開始

### 🔑 API設定

<details>
<summary><b>Google翻訳（デフォルト）</b></summary>

- ✅ 設定不要
- ✅ 無料で使用可能
- ✅ すぐに使える

</details>

<details>
<summary><b>DeepSeek API</b></summary>

1. [DeepSeekプラットフォーム](https://platform.deepseek.com/)からAPIキーを取得
2. 拡張機能の設定を開く（ポップアップの⚙️ボタン）
3. API設定セクションへ移動
4. ドロップダウンから「DeepSeek」を選択
5. APIキーを入力
6. 設定を保存

</details>

<details>
<summary><b>OpenAI API</b></summary>

1. [OpenAIプラットフォーム](https://platform.openai.com/)からAPIキーを取得
2. 拡張機能の設定を開く
3. ドロップダウンから「OpenAI」を選択
4. APIキーを入力
5. オプション：翻訳プロンプトをカスタマイズ
6. 設定を保存

</details>

<details>
<summary><b>Baidu翻訳API</b></summary>

1. [Baidu翻訳](https://fanyi-api.baidu.com/)からAPP IDとシークレットキーを取得
2. 拡張機能の設定を開く
3. ドロップダウンから「Baidu」を選択
4. 次の形式で認証情報を入力：`appid:secretkey`
5. 設定を保存

</details>

## 🎮 使用方法

### 📖 基本的な翻訳
1. 翻訳したいウェブページへ移動
2. UltraTranslateアイコンをクリック
3. 「ページを翻訳」をクリック
4. ページが翻訳される際の進捗インジケーターを確認
5. 原文は透明度を下げて表示され、翻訳は緑色でハイライト表示

### ⏹️ 翻訳を停止
- 「翻訳を停止」ボタンをクリックして進行中の翻訳を停止
- 大きなページやキャンセルしたい場合に便利

### ⌨️ キーボードショートカット
- `Alt+T`：翻訳のオン/オフ切り替え
- `Alt+O`：原文の表示切り替え

### 🤖 カスタム翻訳プロンプト（AI APIのみ）
1. 設定ページを開く
2. 翻訳セクションへ移動
3. テキストエリアにカスタムプロンプトを入力
4. 対象言語のプレースホルダーとして`{language}`を使用
5. 例：「{language}に翻訳し、専門用語は保持し、簡潔で自然に」

## 🔧 高度な設定

### 💾 キャッシュ管理
- **キャッシュサイズ**：現在キャッシュされている翻訳数を表示
- **キャッシュ制限**：最大1000件の翻訳を保存
- **キャッシュ有効期限**：デフォルト24時間
- **キャッシュをクリア**：すべてのキャッシュされた翻訳を削除

### 🎨 外観のカスタマイズ
- **翻訳スタイル**：ハイライト、下線、バブル、並列表示から選択
- **翻訳の色**：ハイライトの色をカスタマイズ
- **フォントサイズ調整**：翻訳テキストをスケール（50-150%）
- **原文の透明度**：原文の視認性を調整（0-100%）

### 🚫 除外サイト
自動翻訳しないURLまたはドメインを追加：
```
example.com
github.com
localhost
```

### 🐛 デバッグモード
翻訳の問題をトラブルシューティングするためのコンソールログを有効化

## 🏗️ 技術アーキテクチャ

### 📋 コンポーネント
- **Manifest V3**：最新のChrome拡張機能アーキテクチャ
- **Content Script**：ウェブページに翻訳機能を注入
- **Background Service Worker**：API呼び出しとメッセージルーティングを処理
- **Options Page**：完全な設定管理インターフェース
- **Popup Interface**：クイックアクセスコントロール

### 🔄 テキスト処理パイプライン
1. **テキスト検出**：TreeWalker APIとNodeFilterで効率的なDOMトラバーサル
2. **フィルタリング**：翻訳不可のコンテンツをスキップする包括的なルール
3. **セグメンテーション**：Intl.Segmenter APIで正確な文分割
4. **バッチ処理**：コンテキストと類似性による賢いグループ化
5. **翻訳**：並行API呼び出し
6. **表示**：原文保持でのDOM操作

### ⚡ パフォーマンス最適化
- **LRUキャッシュ**：重複するAPI呼び出しを削減
- **バッチ処理**：効率化のために類似テキストをグループ化
- **並行翻訳**：複数のバッチを同時処理
- **デバウンスされた変更**：過度な再翻訳を防止
- **WeakMapストレージ**：メモリ効率的な原文保存

## 🔒 プライバシーとセキュリティ

- ✅ すべての翻訳は公式APIエンドポイントを通じて処理
- ✅ APIキーはChromeの安全なストレージに保存
- ✅ 第三者へのデータ収集や送信なし
- ✅ 元のページコンテンツは永続的に変更されない
- ✅ キャッシュはローカルに保存され、自動的に期限切れ

## 🐛 トラブルシューティング

### 設定ページが開かない
- 拡張機能アイコンを右クリックして「オプション」を選択
- または `chrome://extensions/` → UltraTranslate → 詳細 → 拡張機能のオプション

### 翻訳が機能しない
1. APIキーが設定されているか確認（Google以外のサービス）
2. ページの読み込みが完了していることを確認
3. ページをリフレッシュしてみる
4. コンソールエラーを確認（F12 → コンソール）
5. サイトが除外リストにないことを確認

### 翻訳が遅い
- 設定でバッチサイズを削減
- キャッシュが大きすぎる場合はクリア
- インターネット接続を確認
- Google翻訳の使用を検討（最速）

## 📝 バージョン履歴

### バージョン 1.0.0
- ✨ マルチAPI対応での初回リリース
- ✨ 原文保持機能
- ✨ ダークテーマUI
- ✨ 9つのインターフェース言語
- ✨ 高度なテキストフィルタリング
- ✨ 翻訳キャッシュ
- ✨ ローディングインジケーター
- ✨ アクセシビリティ機能
- ✨ RTL言語サポート

## 🤝 貢献

貢献を歓迎します！お気軽にイシューやプルリクエストを提出してください。

## 📄 ライセンス

このプロジェクトは教育および個人使用のために提供されています。

## 📧 サポート

問題、質問、提案がある場合：
- GitHubでイシューを開く
- 既存のドキュメントを確認
- トラブルシューティングセクションを確認

---

より良いウェブ翻訳体験のために ❤️ で作られました